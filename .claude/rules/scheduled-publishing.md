# 予約公開ルール

Zenn記事の公開は、**基本的に予約公開**を推奨します。
読者の多い曜日・時間帯に合わせて公開することで、記事の到達率を高めます。

---

## 基本ルール

### デフォルトは予約公開

- `/publish` 実行時は予約公開を提案する
- 即時公開が必要な場合は `/publish --now` を使用

### 推奨公開時刻

| 曜日 | 時刻  | 理由                 |
| ---- | ----- | -------------------- |
| 月曜 | 12:00 | 週初めの昼休み時間帯 |
| 火曜 | 07:00 | 通勤時間帯           |
| 水曜 | 07:00 | 通勤時間帯           |
| 木曜 | 07:00 | 通勤時間帯           |
| 金曜 | 07:00 | 通勤時間帯           |

**土日は公開を避ける**（閲覧数が少ない）

---

## 公開日時計算ロジック

`/publish` 実行時に以下のロジックで次の公開日を計算します。

### 曜日別の次回公開日

| 今日の曜日 | 次の公開日    | 時刻  |
| ---------- | ------------- | ----- |
| 月曜       | 翌日（火曜）  | 07:00 |
| 火曜       | 翌日（水曜）  | 07:00 |
| 水曜       | 翌日（木曜）  | 07:00 |
| 木曜       | 翌日（金曜）  | 07:00 |
| 金曜       | 3日後（月曜） | 12:00 |
| 土曜       | 2日後（月曜） | 12:00 |
| 日曜       | 翌日（月曜）  | 12:00 |

### 祝日・休日チェック

計算した日付が祝日・休日に該当する場合は、次の平日にずらします。

---

## 避けるべき日

### 2026年の日本の祝日

| 日付  | 祝日名       |
| ----- | ------------ |
| 1/1   | 元日         |
| 1/13  | 成人の日     |
| 2/11  | 建国記念の日 |
| 2/23  | 天皇誕生日   |
| 3/20  | 春分の日     |
| 4/29  | 昭和の日     |
| 5/3   | 憲法記念日   |
| 5/4   | みどりの日   |
| 5/5   | こどもの日   |
| 5/6   | 振替休日     |
| 7/20  | 海の日       |
| 8/11  | 山の日       |
| 9/21  | 敬老の日     |
| 9/23  | 秋分の日     |
| 10/12 | スポーツの日 |
| 11/3  | 文化の日     |
| 11/23 | 勤労感謝の日 |

### 長期休暇期間

| 期間         | 説明               |
| ------------ | ------------------ |
| 12/28〜1/3   | 年末年始           |
| 4/29〜5/6頃  | ゴールデンウィーク |
| 8/13〜8/16頃 | お盆期間           |

:::message
長期休暇中は閲覧数が減少するため、公開を避けることを推奨します。
休暇明けの火〜金曜に設定するのが効果的です。
:::

---

## `published_at` の重要な注意事項

:::message alert
**⚠️ `published_at` は一度設定すると変更できません**

これはZennの仕様です。設定前に必ず日時を確認してください。
:::

### 確認フロー

1. **提案時の確認**: 「〇月〇日(曜) 07:00 で予約しますか？」
2. **設定前の警告**: 「⚠️ published_at は変更不可」
3. **最終確認**: 「この日時で間違いありませんか？ (yes/no)」

**必ず明示的な「yes」を得てから設定すること。**

### 間違えた場合のリカバリー

#### 公開前（push前）

ファイルを直接編集して `published_at` を修正します。

```bash
# Front Matterを直接編集
vim articles/対象記事.md
```

#### 公開予約済み（push後）

記事を削除して新しいslugで作り直します。

```bash
# 1. 間違えた記事を削除
rm articles/間違えた記事.md

# 2. 新しいslugで記事を作成
npx zenn-cli new:article --slug 新しいslug

# 3. 内容をコピーして正しいpublished_atを設定

# 4. コミット＆プッシュ
git add .
git commit -m "fix: 記事の予約日時を修正（新slug）"
git push
```

---

## 既存予約との重複チェック

同日に複数の記事を公開すると、互いに閲覧数を食い合う可能性があります。

### 重複チェック方法

```bash
# 予約公開が設定されている記事を確認
grep -l "published_at:" articles/*.md | xargs grep "published_at:"
```

### 重複がある場合

- 別の日にずらすことを推奨
- どうしても同日の場合は、時刻を2時間以上空ける

---

## 関連ファイル

- `/publish` スキル: `.claude/skills/publish.md`
- 公開前チェックリスト: `.claude/rules/pre-publish-checklist.md`
